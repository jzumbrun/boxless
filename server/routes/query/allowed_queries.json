[
    {
        "name": "greetings.truncate",
        "expression": "TRUNCATE TABLE greetings",
        "access": ["user"]
    },
    {
        "name": "greetings.delete",
        "expression": "DELETE FROM greetings WHERE id=/*$id*/",
        "access": ["user"]
    },
    {
        "name": "greetings.select",
        "expression": "SELECT /*#select*/ FROM greetings WHERE description=/*$description*/ LIMIT /*$limit*/",
        "access": ["user"]
    },
    {
        "name": "greetings.select.all",
        "expression": "SELECT {{select}} FROM greetings WHERE user_id={{user.id}} LIMIT {{limit}}",
        "access": ["user"],
        "schema": {
            "type": "object",
            "properties": {
                "select": {
                    "type": "array",
                    "default": ["*"]
                },
                "limit": {
                    "type": "number",
                    "maximum": 200,
                    "default": 1
                }
            },
            "additionalProperties": false
        }
    },
    {
        "name": "greetings.insert",
        "expression": "INSERT INTO greetings (description, words) VALUES (/*$description*/, /*$words*/)",
        "access": ["user"]
    },
    {
        "name": "greetings.update",
        "expression": "UPDATE greetings SET description=/*$description*/ WHERE id=/*$id*/",
        "access": ["user"]
    },
    {
        "name": "users.current",
        "expression": "SELECT {{select}} FROM users WHERE id={{user.id}} LIMIT 1",
        "access": ["user"],
        "schema": {
            "type": "object",
            "properties": {
                "select": {
                    "type": "array",
                    "items": {
                        "anyOf": [ {"enum": ["id", "name", "email"]} ]
                    }
                }
            },
            "additionalProperties": false
        }
    }
]